const ResponseBody = require('../../shared/ResonseBody.model.js');
const { createProduct, viewProduct, updateProduct, deleteProduct} = require('../controller/product.controller');

const createProductAPI = async (req, res) => {
  let { name, brand, price, type, available } = req.body;
  let message;

  try {
    let response = await createProduct({ name, brand, price, type, available });
    message = new ResponseBody(true, 200, response);
  } catch (error) {
    if (error.statusCode) {
      message = new ResponseBody(error.ok, error.statusCode, error.data);
    } else {
      console.log(error);
      message = new ResponseBody(false, 500, 'Ocurri贸 un error al procesar la solicitud.');
    }
  }

  return res.json(message);
}

const viewProductAPI = async (req, res) => {
  let message;

  try {
    let response = await viewProduct();
    message = new ResponseBody(true, 200, response);
  } catch (error) {
    if (error.statusCode) {
      message = new ResponseBody(error.ok, error.statusCode, error.data);
    } else {
      console.log(error);
      message = new ResponseBody(false, 500, 'Ocurri贸 un error al procesar la solicitud.');
    }
  }

  return res.json(message);
}

const updateProductAPI = async (req, res) => {
  let { name, brand, price, type, available, id } = req.body;
  let message;

  if (!id) {
    return res.json(new ResponseBody(false, 400, 'El ID del usuario es requerido.'));
  }

  try {
    let response = await updateProduct({ name, brand, price, type, available , id });
    message = new ResponseBody(true, 200, response);
  } catch (error) {
    if (error.statusCode) {
      message = new ResponseBody(error.ok, error.statusCode, error.data);
    } else {
      console.log(error);
      message = new ResponseBody(false, 500, 'Ocurri贸 un error al procesar la solicitud.');
    }
  }

  return res.json(message);
}

const deleteProductAPI = async (req, res) => {
  let { id } = req.body;
  let message;

  if (!id) {
    return res.json(new ResponseBody(false, 400, 'El ID del usuario es requerido.'));
  }

  try {
    let response = await deleteProduct({ id });
    message = new ResponseBody(true, 200, response);
  } catch (error) {
    if (error.statusCode) {
      message = new ResponseBody(error.ok, error.statusCode, error.data);
    } else {
      console.log(error);
      message = new ResponseBody(false, 500, 'Ocurri贸 un error al procesar la solicitud.');
    }
  }

  return res.json(message);
}



module.exports = {
  createProductAPI,
  viewProductAPI,
  updateProductAPI,
  deleteProductAPI,
};